/****** Object:  Procedure [BT].[spListProjects]    Committed by VersionSQL https://www.versionsql.com ******/

CREATE PROCEDURE [BT].[spListProjects]
AS
SELECT P.PROJECTID,P.PROJECTCODE,P.PROJECTNAME,CONVERT(DATETIME,P.STARTDATE,103) STARTDATE,CONVERT(DATETIME,P.ENDDATE,103) ENDDATE,
P.DURATION,YPM1.FINYEAR STARTFINYEAR,
       YPM1.PERIODFULLNAME STARTPERIOD,YPM2.FINYEAR ENDFINYEAR,YPM2.PERIODFULLNAME ENDPERIOD,P.CTCRevisionDate,P.CTCRevisionID  
FROM BT.PROJECTS P 
INNER JOIN BT.YEARPERIODMASTER YPM1 ON YPM1.YEARPERIODID=P.BEGINYEARPERIODCODE 
INNER JOIN BT.YEARPERIODMASTER YPM2 ON YPM2.YEARPERIODID=P.ENDYEARPERIODCODE 
ORDER BY PROJECTID DESC